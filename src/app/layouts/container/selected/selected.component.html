<div class="random-selector-container">
  <div class="main-card">
    <h2 class="title">{{ title }}</h2>

    <!-- Slot Machine Display -->
    <div class="slot-machine-container">
      <div class="slot-window">
        <div class="slot-content" [class.spinning]="isSpinning">
          <div class="store-visual" *ngIf="getCurrentStore()"
            [style.background]="getStoreVisual(getCurrentStore()!).gradient">
            <div class="store-emoji">
              {{ getStoreVisual(getCurrentStore()!).emoji }}
            </div>
            <div class="store-initial">
              {{ getStoreInitial(getCurrentStore()!) }}
            </div>
          </div>
          <div class="store-placeholder" *ngIf="!getCurrentStore()">
            â“
          </div>
        </div>
      </div>
      <div class="store-name-display" *ngIf="getCurrentStore()">
        {{ getCurrentStore()!.name }}
      </div>
      <div class="store-name-display placeholder" *ngIf="!getCurrentStore()">
        æº–å‚™é¸åº—...
      </div>
    </div>

    <!-- Controls -->
    <div class="action-buttons">
      <button class="start-btn" (click)="startRandomSelection()" [disabled]="isSpinning || checkedList.length === 0"
        [class.spinning]="isSpinning">
        <span *ngIf="!isSpinning">ğŸš€ é–‹å§‹é¸åº—</span>
        <span *ngIf="isSpinning">ğŸ² é¸æ“‡ä¸­...</span>
      </button>
    </div>

    <!-- Store Filter Expansion Panel -->
    <div class="filter-section">
      <kendo-expansionpanel [expanded]="!isSpinning && !showResult"
        title="åº—å®¶æ¸…å–® ({{ checkedList.length }}/{{ checklist.length }})" class="custom-panel">
        <div class="panel-actions">
          <button kendoButton size="small" themeColor="primary" fillMode="solid" (click)="selectAllStores()">å…¨é¸</button>
          <button kendoButton size="small" themeColor="base" fillMode="solid" (click)="deselectAllStores()">æ¸…ç©º</button>
        </div>
        <div class="store-list-grid">
          <label *ngFor="let store of checklist" class="store-checkbox-item">
            <input type="checkbox" kendoCheckBox [(ngModel)]="store.isSelected" (change)="onStoreSelectionChange()"
              [disabled]="isSpinning" />
            <span class="checkbox-label">{{ store.name }}</span>
          </label>
        </div>
      </kendo-expansionpanel>
    </div>
  </div>

  <!-- Result Dialog (Keeping existing logic but styling handles appearance) -->
  <kendo-dialog title="ğŸ‰ æ±ºå®šäº†ï¼" *ngIf="opened" (close)="closeDialog()" class="result-dialog" [minWidth]="300">
    <div class="dialog-content">
      <div class="dialog-visual" *ngIf="selectedStore" [style.background]="getStoreVisual(selectedStore).gradient">
        <span class="dialog-emoji">{{ getStoreVisual(selectedStore).emoji }}</span>
      </div>
      <h3 class="dialog-store-name">{{ selectedStore?.name }}</h3>
      <p class="dialog-message">ä»Šå¤©å°±åƒé€™å®¶å§ï¼Bon AppÃ©tit! ğŸ˜‹</p>
    </div>
    <kendo-dialog-actions>
      <button kendoButton (click)="goToGoogleMaps()" themeColor="primary" size="large">
        ğŸ“ æŸ¥çœ‹åœ°åœ–
      </button>
      <button kendoButton (click)="closeDialog()" fillMode="flat" size="large">
        å¥½çš„
      </button>
    </kendo-dialog-actions>
  </kendo-dialog>
</div>